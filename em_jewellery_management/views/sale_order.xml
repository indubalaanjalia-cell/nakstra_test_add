<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="sale_order_line_label" model="ir.ui.view">
        <field name="name">sale.order.line.label</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='order_line']/tree//field[@name='product_uom_qty']" position="before">
                <field name="label_id"/>
                <field name="purity_id"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree//field[@name='price_unit']" position="before">
                    <field name="fine_weight"/>
                    <field name="mc_amount"/>
                    <field name="tag_weight"/>
                    <field name="net_weight"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree//field[@name='product_id']" position="replace">
                    <field name="product_id" string="Product"/>
            </xpath>
            <xpath expr="//field[@name='order_line']/tree//field[@name='product_template_id']" position="attributes">
                <attribute name="optional">hide</attribute>
            </xpath>
            <xpath expr="//field[@name='order_line']" position="after">
                <button
                    name="action_create_old_gold_po"
                    type="object"
                    string="Purchase Old Gold"
                    class="btn btn-primary"
                    invisible="state not in ('draft', 'sent')"
                />
            </xpath>
            <xpath expr="//div[@name='button_box']" position="inside">
                <button
                    name="action_open_old_gold_pos"
                    type="object"
                    class="oe_stat_button"
                    icon="fa-shopping-cart"
                    invisible="old_gold_po_count == 0">
                    <field name="old_gold_po_count" widget="statinfo"
                           string="Old Gold POs"/>
                </button>
            </xpath>
            <xpath expr="//field[@name='order_line']" position="after">
                <group>
                    <field name="apply_scheme" readonly="state !='draft'"/>

                    <button
                        name="action_apply_scheme"
                        string="Apply Scheme"
                        type="object"
                        class="btn-primary"
                        invisible="not apply_scheme or state not in ('draft', 'sent')"/>

                    <button
                        name="action_remove_scheme"
                        string="Remove Scheme"
                        type="object"
                        class="btn-secondary"
                        invisible="not apply_scheme or state not in ('draft', 'sent')"/>
                </group>
            </xpath>
        </field>
    </record>

</odoo>